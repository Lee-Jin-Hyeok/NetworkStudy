## ICMP

### 1. ICMP이 뭐야?

Internet Control Message Protocol의 약자로서, IPv4와 마찬가지로 OSI 7계층 중 3계층에 존재하는
프로토콜 중 하나이며, 네트워크 상에서 패킷이 제대로 전송되었는지 알 수 있게 해주는 프로토콜이다.

### 2. ICMP가 하는 일

ICMP는 구조를 보면 Type과 Code라는 부분이 존재하는데,
이 부분을 이용하여 정상적으로 패킷이 전달되었다면 그에 맞는 응답을,
만약 패킷이 정상적으로 전달되지 못했다면 그에 맞는 에러 메세지를 응답해준다.

### 3. ICMP의 구조

ICMP는 총 8 byte로 이루어져 있으며, 다음과 같이 구성되어 있다.

1. Type : 1 byte
2. Code : 1 byte
3. Checksum : 2 byte
4. other : 4 byte

그럼 각각의 요소에 대해서 알아보자.

#### 3-1. Type : 1 byte

사실 ICMP에서 가장 중요한 것은 Type이다.
이것만 잘 알아도 에러 메세지를 읽을 수 있고 무슨 문제가 생겼는지 파악할 수 있기 때문이다.

Type은 에러 또는 정상적인 작동에 대한 메세지의 타입을 말한다.
이것도 4가지 정도만 알고 있으면 되는데

1. Type 0 : Echo Reply 라는 메세지가 뜨며 정상적인 응답일 경우에 이 값이 저장된다.
2. Type 3 : Port Unreachable 라는 메세지가 뜨며,
                  패킷이 도착지까지 정상적으로 가지도 못했을 때 이 값이 저장된다.
3. Type 8 : Echo 라는 메세지가 뜨며,
                  요청을 보내는 패킷일 경우에 이 값이 저장된다.
4. Type 11 : Time Exceded 라는 메세지가 뜨며,
                    패킷이 도착은 했으나 다시 돌아오지 못했을 때 이 값이 저장된다.

#### 3-2. Code : 1 byte

Type으로는 대략적으로 무슨 에러가 생겼는지 알 수가 있다.
하지만 정확하게 무슨 문제로 인해 이렇게 되었는지는 알 수 없는데
그것을 저장한 것이 이 Code 값이다.
Code 값도 숫자에 따라서 나뉘어지고 세분화되지만
Type으로도 충분히 해결할 수 있기 때문에 잘 사용하지 않는다.

Code가 없는 경우도 있는데 그럴 경우에는 0으로 저장된다.

#### 3-3. Checksum : 2 byte

Checksum은 나중에 더 자세하게 다루겠지만
지금은 원래의 패킷의 상태에서 손상된 곳은 없는지 검증하는 코드이다.

#### 3-4. other : 4 byte

왜 이름이 other냐면 정말 쓸데 없는 값이 들어있기 때문이다.
abcdefghijklmnopqrstuvwabcdefghi
이라는 값이 저장되어 있다.

왜 들어가 있는지는 모르겠다.
혹시나 이에 대해 아시는 분은 얘기해주시면 감사하겠습니다.